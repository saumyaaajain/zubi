{"ast":null,"code":"function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport SendIcon from './icons/SendIcon';\nimport FileIcon from './icons/FileIcon';\nimport EmojiIcon from './icons/EmojiIcon';\nimport PopupWindow from './popups/PopupWindow';\nimport EmojiPicker from './emoji-picker/EmojiPicker';\n\nvar UserInput = function (_Component) {\n  _inherits(UserInput, _Component);\n\n  function UserInput() {\n    _classCallCheck(this, UserInput);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\n    _this.toggleEmojiPicker = function (e) {\n      e.preventDefault();\n\n      if (!_this.state.emojiPickerIsOpen) {\n        _this.setState({\n          emojiPickerIsOpen: true\n        });\n      }\n    };\n\n    _this.closeEmojiPicker = function (e) {\n      if (_this.emojiPickerButton.contains(e.target)) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n\n      _this.setState({\n        emojiPickerIsOpen: false\n      });\n    };\n\n    _this._handleEmojiPicked = function (emoji) {\n      _this.setState({\n        emojiPickerIsOpen: false\n      });\n\n      if (_this.state.inputHasText) {\n        _this.userInput.innerHTML += emoji;\n      } else {\n        _this.props.onSubmit({\n          author: 'me',\n          type: 'emoji',\n          data: {\n            emoji: emoji\n          }\n        });\n      }\n    };\n\n    _this.handleEmojiFilterChange = function (event) {\n      var emojiFilter = event.target.value;\n\n      _this.setState({\n        emojiFilter: emojiFilter\n      });\n    };\n\n    _this._renderEmojiPopup = function () {\n      return React.createElement(PopupWindow, {\n        isOpen: _this.state.emojiPickerIsOpen,\n        onClickedOutside: _this.closeEmojiPicker,\n        onInputChange: _this.handleEmojiFilterChange\n      }, React.createElement(EmojiPicker, {\n        onEmojiPicked: _this._handleEmojiPicked,\n        filter: _this.state.emojiFilter\n      }));\n    };\n\n    _this.state = {\n      inputActive: false,\n      inputHasText: false,\n      emojiPickerIsOpen: false,\n      emojiFilter: ''\n    };\n    return _this;\n  }\n\n  UserInput.prototype.componentDidMount = function componentDidMount() {\n    this.emojiPickerButton = document.querySelector('#sc-emoji-picker-button');\n  };\n\n  UserInput.prototype.handleKeyDown = function handleKeyDown(event) {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      return this._submitText(event);\n    }\n  };\n\n  UserInput.prototype.handleKeyUp = function handleKeyUp(event) {\n    var inputHasText = event.target.innerHTML.length !== 0 && event.target.innerText !== '\\n';\n    this.setState({\n      inputHasText: inputHasText\n    });\n  };\n\n  UserInput.prototype._showFilePicker = function _showFilePicker() {\n    this._fileUploadButton.click();\n  };\n\n  UserInput.prototype._submitText = function _submitText(event) {\n    event.preventDefault();\n    var text = this.userInput.textContent;\n\n    if (text && text.length > 0) {\n      this.props.onSubmit({\n        author: 'me',\n        type: 'text',\n        data: {\n          text: text\n        }\n      });\n      this.userInput.innerHTML = '';\n    }\n  };\n\n  UserInput.prototype._onFilesSelected = function _onFilesSelected(event) {\n    if (event.target.files && event.target.files.length > 0) {\n      this.props.onFilesSelected(event.target.files);\n    }\n  };\n\n  UserInput.prototype._renderSendOrFileIcon = function _renderSendOrFileIcon() {\n    var _this2 = this;\n\n    if (this.state.inputHasText) {\n      return React.createElement('div', {\n        className: 'sc-user-input--button'\n      }, React.createElement(SendIcon, {\n        onClick: this._submitText.bind(this)\n      }));\n    }\n\n    return React.createElement('div', {\n      className: 'sc-user-input--button'\n    }, React.createElement(FileIcon, {\n      onClick: this._showFilePicker.bind(this)\n    }), React.createElement('input', {\n      type: 'file',\n      name: 'files[]',\n      multiple: true,\n      ref: function ref(e) {\n        _this2._fileUploadButton = e;\n      },\n      onChange: this._onFilesSelected.bind(this)\n    }));\n  };\n\n  UserInput.prototype.render = function render() {\n    var _this3 = this;\n\n    var _state = this.state,\n        emojiPickerIsOpen = _state.emojiPickerIsOpen,\n        inputActive = _state.inputActive;\n    return React.createElement('form', {\n      className: 'sc-user-input ' + (inputActive ? 'active' : '')\n    }, React.createElement('div', {\n      role: 'button',\n      tabIndex: '0',\n      onFocus: function onFocus() {\n        _this3.setState({\n          inputActive: true\n        });\n      },\n      onBlur: function onBlur() {\n        _this3.setState({\n          inputActive: false\n        });\n      },\n      ref: function ref(e) {\n        _this3.userInput = e;\n      },\n      onKeyDown: this.handleKeyDown.bind(this),\n      onKeyUp: this.handleKeyUp.bind(this),\n      contentEditable: 'true',\n      placeholder: 'Write a reply...',\n      className: 'sc-user-input--text'\n    }), React.createElement('div', {\n      className: 'sc-user-input--buttons'\n    }, React.createElement('div', {\n      className: 'sc-user-input--button'\n    }), React.createElement('div', {\n      className: 'sc-user-input--button'\n    }, this.props.showEmoji && React.createElement(EmojiIcon, {\n      onClick: this.toggleEmojiPicker,\n      isActive: emojiPickerIsOpen,\n      tooltip: this._renderEmojiPopup()\n    })), this._renderSendOrFileIcon()));\n  };\n\n  return UserInput;\n}(Component);\n\nUserInput.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  onSubmit: PropTypes.func.isRequired,\n  onFilesSelected: PropTypes.func.isRequired,\n  showEmoji: PropTypes.bool\n} : {};\nexport default UserInput;","map":{"version":3,"sources":["/Users/saumya/WebstormProjects/zubi/node_modules/react-chat-window/es/components/UserInput.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","PropTypes","React","Component","SendIcon","FileIcon","EmojiIcon","PopupWindow","EmojiPicker","UserInput","_Component","_this","toggleEmojiPicker","e","preventDefault","state","emojiPickerIsOpen","setState","closeEmojiPicker","emojiPickerButton","contains","target","stopPropagation","_handleEmojiPicked","emoji","inputHasText","userInput","innerHTML","props","onSubmit","author","type","data","handleEmojiFilterChange","event","emojiFilter","_renderEmojiPopup","createElement","isOpen","onClickedOutside","onInputChange","onEmojiPicked","filter","inputActive","componentDidMount","document","querySelector","handleKeyDown","keyCode","shiftKey","_submitText","handleKeyUp","length","innerText","_showFilePicker","_fileUploadButton","click","text","textContent","_onFilesSelected","files","onFilesSelected","_renderSendOrFileIcon","_this2","className","onClick","bind","name","multiple","ref","onChange","render","_this3","_state","role","tabIndex","onFocus","onBlur","onKeyDown","onKeyUp","contentEditable","placeholder","showEmoji","isActive","tooltip","propTypes","process","env","NODE_ENV","func","isRequired","bool"],"mappings":"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","sourcesContent":["function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport SendIcon from './icons/SendIcon';\nimport FileIcon from './icons/FileIcon';\nimport EmojiIcon from './icons/EmojiIcon';\nimport PopupWindow from './popups/PopupWindow';\nimport EmojiPicker from './emoji-picker/EmojiPicker';\n\nvar UserInput = function (_Component) {\n  _inherits(UserInput, _Component);\n\n  function UserInput() {\n    _classCallCheck(this, UserInput);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this));\n\n    _this.toggleEmojiPicker = function (e) {\n      e.preventDefault();\n      if (!_this.state.emojiPickerIsOpen) {\n        _this.setState({ emojiPickerIsOpen: true });\n      }\n    };\n\n    _this.closeEmojiPicker = function (e) {\n      if (_this.emojiPickerButton.contains(e.target)) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      _this.setState({ emojiPickerIsOpen: false });\n    };\n\n    _this._handleEmojiPicked = function (emoji) {\n      _this.setState({ emojiPickerIsOpen: false });\n      if (_this.state.inputHasText) {\n        _this.userInput.innerHTML += emoji;\n      } else {\n        _this.props.onSubmit({\n          author: 'me',\n          type: 'emoji',\n          data: { emoji: emoji }\n        });\n      }\n    };\n\n    _this.handleEmojiFilterChange = function (event) {\n      var emojiFilter = event.target.value;\n      _this.setState({ emojiFilter: emojiFilter });\n    };\n\n    _this._renderEmojiPopup = function () {\n      return React.createElement(\n        PopupWindow,\n        {\n          isOpen: _this.state.emojiPickerIsOpen,\n          onClickedOutside: _this.closeEmojiPicker,\n          onInputChange: _this.handleEmojiFilterChange\n        },\n        React.createElement(EmojiPicker, {\n          onEmojiPicked: _this._handleEmojiPicked,\n          filter: _this.state.emojiFilter\n        })\n      );\n    };\n\n    _this.state = {\n      inputActive: false,\n      inputHasText: false,\n      emojiPickerIsOpen: false,\n      emojiFilter: ''\n    };\n    return _this;\n  }\n\n  UserInput.prototype.componentDidMount = function componentDidMount() {\n    this.emojiPickerButton = document.querySelector('#sc-emoji-picker-button');\n  };\n\n  UserInput.prototype.handleKeyDown = function handleKeyDown(event) {\n    if (event.keyCode === 13 && !event.shiftKey) {\n      return this._submitText(event);\n    }\n  };\n\n  UserInput.prototype.handleKeyUp = function handleKeyUp(event) {\n    var inputHasText = event.target.innerHTML.length !== 0 && event.target.innerText !== '\\n';\n    this.setState({ inputHasText: inputHasText });\n  };\n\n  UserInput.prototype._showFilePicker = function _showFilePicker() {\n    this._fileUploadButton.click();\n  };\n\n  UserInput.prototype._submitText = function _submitText(event) {\n    event.preventDefault();\n    var text = this.userInput.textContent;\n    if (text && text.length > 0) {\n      this.props.onSubmit({\n        author: 'me',\n        type: 'text',\n        data: { text: text }\n      });\n      this.userInput.innerHTML = '';\n    }\n  };\n\n  UserInput.prototype._onFilesSelected = function _onFilesSelected(event) {\n    if (event.target.files && event.target.files.length > 0) {\n      this.props.onFilesSelected(event.target.files);\n    }\n  };\n\n  UserInput.prototype._renderSendOrFileIcon = function _renderSendOrFileIcon() {\n    var _this2 = this;\n\n    if (this.state.inputHasText) {\n      return React.createElement(\n        'div',\n        { className: 'sc-user-input--button' },\n        React.createElement(SendIcon, { onClick: this._submitText.bind(this) })\n      );\n    }\n    return React.createElement(\n      'div',\n      { className: 'sc-user-input--button' },\n      React.createElement(FileIcon, { onClick: this._showFilePicker.bind(this) }),\n      React.createElement('input', {\n        type: 'file',\n        name: 'files[]',\n        multiple: true,\n        ref: function ref(e) {\n          _this2._fileUploadButton = e;\n        },\n        onChange: this._onFilesSelected.bind(this)\n      })\n    );\n  };\n\n  UserInput.prototype.render = function render() {\n    var _this3 = this;\n\n    var _state = this.state,\n        emojiPickerIsOpen = _state.emojiPickerIsOpen,\n        inputActive = _state.inputActive;\n\n    return React.createElement(\n      'form',\n      { className: 'sc-user-input ' + (inputActive ? 'active' : '') },\n      React.createElement('div', {\n        role: 'button',\n        tabIndex: '0',\n        onFocus: function onFocus() {\n          _this3.setState({ inputActive: true });\n        },\n        onBlur: function onBlur() {\n          _this3.setState({ inputActive: false });\n        },\n        ref: function ref(e) {\n          _this3.userInput = e;\n        },\n        onKeyDown: this.handleKeyDown.bind(this),\n        onKeyUp: this.handleKeyUp.bind(this),\n        contentEditable: 'true',\n        placeholder: 'Write a reply...',\n        className: 'sc-user-input--text'\n      }),\n      React.createElement(\n        'div',\n        { className: 'sc-user-input--buttons' },\n        React.createElement('div', { className: 'sc-user-input--button' }),\n        React.createElement(\n          'div',\n          { className: 'sc-user-input--button' },\n          this.props.showEmoji && React.createElement(EmojiIcon, {\n            onClick: this.toggleEmojiPicker,\n            isActive: emojiPickerIsOpen,\n            tooltip: this._renderEmojiPopup()\n          })\n        ),\n        this._renderSendOrFileIcon()\n      )\n    );\n  };\n\n  return UserInput;\n}(Component);\n\nUserInput.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  onSubmit: PropTypes.func.isRequired,\n  onFilesSelected: PropTypes.func.isRequired,\n  showEmoji: PropTypes.bool\n} : {};\n\nexport default UserInput;"]},"metadata":{},"sourceType":"module"}